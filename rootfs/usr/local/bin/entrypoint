#!/usr/bin/env bash
set -e

declare -x OWNCLOUD_DOMAIN
[[ -z "${OWNCLOUD_DOMAIN}" ]] && OWNCLOUD_DOMAIN="${HOSTNAME}"

declare -x OWNCLOUD_IPADDRESS
[[ -z "${OWNCLOUD_IPADDRESS}" ]] && OWNCLOUD_IPADDRESS="$(hostname -i)"

declare -x OWNCLOUD_LOGLEVEL
[[ -z "${OWNCLOUD_LOGLEVEL}" ]] && OWNCLOUD_LOGLEVEL="0"

declare -x OWNCLOUD_DB_TYPE
[[ -z "${OWNCLOUD_DB_TYPE}" ]] && OWNCLOUD_DB_TYPE="sqlite"

declare -x OWNCLOUD_DB_HOST
[[ -z "${OWNCLOUD_DB_HOST}" ]] && OWNCLOUD_DB_HOST=""

declare -x OWNCLOUD_DB_NAME
[[ -z "${OWNCLOUD_DB_NAME}" ]] && OWNCLOUD_DB_NAME="owncloud"

declare -x OWNCLOUD_DB_USERNAME
[[ -z "${OWNCLOUD_DB_USERNAME}" ]] && OWNCLOUD_DB_USERNAME=""

declare -x OWNCLOUD_DB_PASSWORD
[[ -z "${OWNCLOUD_DB_PASSWORD}" ]] && OWNCLOUD_DB_PASSWORD=""

declare -x OWNCLOUD_DB_PREFIX
[[ -z "${OWNCLOUD_DB_PREFIX}" ]] && OWNCLOUD_DB_PREFIX=""

declare -x OWNCLOUD_DB_TIMEOUT
[[ -z "${OWNCLOUD_DB_TIMEOUT}" ]] && OWNCLOUD_DB_TIMEOUT="180"

declare -x OWNCLOUD_DB_FAIL
[[ -z "${OWNCLOUD_DB_FAIL}" ]] && OWNCLOUD_DB_FAIL="true"

declare -x OWNCLOUD_ADMIN_USERNAME
[[ -z "${OWNCLOUD_ADMIN_USERNAME}" ]] && OWNCLOUD_ADMIN_USERNAME="admin"

declare -x OWNCLOUD_ADMIN_PASSWORD
[[ -z "${OWNCLOUD_ADMIN_PASSWORD}" ]] && OWNCLOUD_ADMIN_PASSWORD="admin"

declare -x OWNCLOUD_REDIS_ENABLED
[[ -z "${OWNCLOUD_REDIS_ENABLED}" ]] && OWNCLOUD_REDIS_ENABLED="false"

declare -x OWNCLOUD_REDIS_HOST
[[ -z "${OWNCLOUD_REDIS_HOST}" ]] && OWNCLOUD_REDIS_HOST="redis"

declare -x OWNCLOUD_REDIS_PORT
[[ -z "${OWNCLOUD_REDIS_PORT}" ]] && OWNCLOUD_REDIS_PORT="6379"

declare -x OWNCLOUD_MEMCACHED_ENABLED
[[ -z "${OWNCLOUD_MEMCACHED_ENABLED}" ]] && OWNCLOUD_MEMCACHED_ENABLED="false"

declare -x OWNCLOUD_MEMCACHED_HOST
[[ -z "${OWNCLOUD_MEMCACHED_HOST}" ]] && OWNCLOUD_MEMCACHED_HOST="memcached"

declare -x OWNCLOUD_MEMCACHED_PORT
[[ -z "${OWNCLOUD_MEMCACHED_PORT}" ]] && OWNCLOUD_MEMCACHED_PORT="11211"

exec $@
